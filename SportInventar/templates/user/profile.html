{% extends 'inc/base.html' %}
{% load static %}

{% block title %}
    <title>Профиль пользователя</title>
{% endblock %}

{% block style %}
    <link rel="stylesheet" href="{% static 'css/profile.css' %}">
    <link rel="stylesheet" href="{% static 'css/inventory.css' %}">
{% endblock %}

{% block body %}

    {% include 'inc/topnav.html' %}

    <div class="profile-container">
        <div class="user-info">
            {% if user.avatar %}
                <img src="{% static 'img/avatar.jpg' %}" alt="User   Avatar" class="profile_avatar">
            {% else %}
                <img src="{% static 'user_placeholder.svg' %}" alt="User   Avatar" class="profile_avatar">
            {% endif %}
            <div class="user-details">
                <h1 class="username">{{ show_user.username }}</h1>
                <h2 class="real-name">{{ show_user.first_name }} {{ show_user.last_name }}</h2>
            </div>
        </div>
        <div class="details-container">
            <div class="inventory">

                <div class="main-content">
                    <div class="header-container">
                        <div class="inventory-header"> 
                            <h2>Список инвентаря</h2>
                            <button class="toggle-view-button" onclick="toggleInventoryView()">Переключить вид</button>
                        </div>
                    </div>
        
        
                    <div class="inventory-list grid-view">
                        {% for i in items %}
                        <div class="inventory-item">
                            <div class="icons-container">
                                <span class="more-info-icon" onclick="window.location.href=`{% url 'inventory:item_view' item_id=i.id %}`" style="cursor: pointer;">
                                    i<i class="fas fa-info-circle"></i>
                                </span>
                                <div class="checkbox-container hidden">
                                    <input type="checkbox" class="inventory-checkbox" data-id="{{ i.id }}">
        
                                </div>
                            </div>
        
                            <div class="text-container"> 
                                <h3>{{ i.name }}</h3>
                                <p>Статус: 
                                    {% if i.status == 0 %}
                                        сломано
                                    {% elif i.status == 1 %}
                                        в норме
                                    {% elif i.status == 2 %}
                                        новое
                                    {% else %}
                                        неизвестно
                                    {% endif %}
                                </p>
                                <p>Владелец: {{ i.current_holder }}</p>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

            </div>

            <div class="usage-history">
                <h2>История использования</h2>
                <ul>
                    {% for history in user.usage_history %}
                        <li>{{ history.item.name }} ({{ history.date }})</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>

{% endblock %}

{% block script %}
    <script src="{% static 'js/inventory.js' %}" data-url="{% url 'inventory:index' %}" data-remurl="{% url 'inventory:del' %}"  data-searchurl="{% url 'user:search' %}"></script>
{% endblock %}